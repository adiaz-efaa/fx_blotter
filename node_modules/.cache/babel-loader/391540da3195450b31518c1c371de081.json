{"ast":null,"code":"import _objectSpread from \"/Users/alvarodiazvalenzuela/Documents/DesafioLatam/fx_blotter/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nconst initialState = {\n  fecha: '1969-01-12',\n  bid: 700.00,\n  ask: 700.30,\n  ops: [{\n    numop: 1,\n    cliente: 'Santander',\n    fxrate: 'USDCLP',\n    cv: 'Compra',\n    monto: 1000000,\n    precio: 700\n  }, {\n    numop: 2,\n    cliente: 'Estado',\n    fxrate: 'USDCLP',\n    cv: 'Venta',\n    monto: 3000000,\n    precio: 701\n  }, {\n    numop: 3,\n    cliente: 'Estado',\n    fxrate: 'USDCLP',\n    cv: 'Venta',\n    monto: 3000000,\n    precio: 702\n  }, {\n    numop: 4,\n    cliente: 'Estado',\n    fxrate: 'USDCLP',\n    cv: 'Compra',\n    monto: 1000000,\n    precio: 701\n  }],\n  nextNumop: 5,\n  posicion: -1000000,\n  ppcompra: 700,\n  ppventa: 701,\n  resTrading: 1000000,\n  resPos: -1000000\n};\n\nconst sumaCompras = (acum, op) => {\n  if (op.cv === 'Compra') {\n    return acum + op.monto;\n  } else {\n    return acum;\n  }\n};\n\nconst comprasPonderadas = (acum, op) => {\n  if (op.cv === 'Compra') {\n    return acum + op.monto * op.precio;\n  } else {\n    return acum;\n  }\n};\n\nconst ventasPonderadas = (acum, op) => {\n  if (op.cv === 'Venta') {\n    return acum + op.monto * op.precio;\n  } else {\n    return acum;\n  }\n};\n\nconst sumaVentas = (acum, op) => {\n  if (op.cv === 'Compra') {\n    return acum;\n  } else {\n    return acum + op.monto;\n  }\n};\n\nconst update = (state = initialState, action) => {\n  if (action.type === 'PUNTA') {\n    const compras = state.ops.reduce(sumaCompras, 0);\n    const ventas = state.ops.reduce(sumaVentas, 0);\n    const posicion = compras - ventas;\n    const compPond = state.ops.reduce(comprasPonderadas, 0);\n    const ventPond = state.ops.reduce(ventasPonderadas, 0);\n    const ppcompra = compras > 0 ? compPond / compras : 0;\n    const ppventa = ventas > 0 ? ventPond / ventas : 0;\n    const resTrading = Math.round(Math.min(compras, ventas) * (ppventa - ppcompra));\n    const resPos = Math.round(posicion > 0 ? posicion * (action.bid - ppcompra) : -posicion * (ppventa - action.ask));\n    return _objectSpread({}, state, {\n      bid: action.bid,\n      ask: action.ask,\n      posicion: posicion,\n      ppcompra: ppcompra,\n      ppventa: ppventa,\n      resTrading: resTrading,\n      resPos: resPos\n    });\n  }\n\n  if (action.type === 'ELIM_OP') {\n    const newOps = state.ops.filter(op => op.numop !== action.whichOp);\n    const compras = newOps.reduce(sumaCompras, 0);\n    const ventas = newOps.reduce(sumaVentas, 0);\n    const posicion = compras - ventas;\n    const compPond = newOps.reduce(comprasPonderadas, 0);\n    const ventPond = newOps.reduce(ventasPonderadas, 0);\n    const ppcompra = compras > 0 ? compPond / compras : 0;\n    const ppventa = ventas > 0 ? ventPond / ventas : 0;\n    const resTrading = Math.round(Math.min(compras, ventas) * (ppventa - ppcompra));\n    const resPos = Math.round(posicion > 0 ? posicion * (action.bid - ppcompra) : -posicion * (ppventa - action.ask));\n    return _objectSpread({}, state, {\n      ops: newOps,\n      bid: action.bid,\n      ask: action.ask,\n      posicion: posicion,\n      ppcompra: ppcompra,\n      ppventa: ppventa,\n      resTrading: resTrading,\n      resPos: resPos\n    });\n  }\n\n  return state;\n};\n\nexport default update;","map":{"version":3,"sources":["/Users/alvarodiazvalenzuela/Documents/DesafioLatam/fx_blotter/src/redux/reducer.js"],"names":["initialState","fecha","bid","ask","ops","numop","cliente","fxrate","cv","monto","precio","nextNumop","posicion","ppcompra","ppventa","resTrading","resPos","sumaCompras","acum","op","comprasPonderadas","ventasPonderadas","sumaVentas","update","state","action","type","compras","reduce","ventas","compPond","ventPond","Math","round","min","newOps","filter","whichOp"],"mappings":"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","sourcesContent":["\nconst initialState = {\n  fecha: '1969-01-12',\n  bid: 700.00,\n  ask: 700.30,\n  ops: [\n    {numop: 1, cliente: 'Santander', fxrate: 'USDCLP', cv: 'Compra', monto: 1000000, precio: 700},\n    {numop: 2, cliente: 'Estado', fxrate: 'USDCLP', cv: 'Venta', monto: 3000000, precio: 701},\n    {numop: 3, cliente: 'Estado', fxrate: 'USDCLP', cv: 'Venta', monto: 3000000, precio: 702},\n    {numop: 4, cliente: 'Estado', fxrate: 'USDCLP', cv: 'Compra', monto: 1000000, precio: 701},\n\n  ],\n  nextNumop: 5,\n  posicion: -1000000,\n  ppcompra: 700,\n  ppventa: 701,\n  resTrading: 1000000,\n  resPos: -1000000\n}\n\nconst sumaCompras = (acum, op) => {\n  if (op.cv === 'Compra') {\n    return acum + op.monto\n  } else {\n    return acum\n  }\n}\n\nconst comprasPonderadas = (acum, op) => {\n  if (op.cv === 'Compra') {\n    return acum + op.monto * op.precio\n  } else {\n    return acum\n  }\n}\n\nconst ventasPonderadas = (acum, op) => {\n  if (op.cv === 'Venta') {\n    return acum + op.monto * op.precio\n  } else {\n    return acum\n  }\n}\n\nconst sumaVentas = (acum, op) => {\n  if (op.cv === 'Compra') {\n    return acum\n  } else {\n    return acum + op.monto\n  }\n}\n\n\nconst update = (state = initialState, action) => {\n  if (action.type === 'PUNTA') {\n    const compras = state.ops.reduce(sumaCompras, 0)\n    const ventas = state.ops.reduce(sumaVentas, 0)\n    const posicion = compras - ventas\n    const compPond = state.ops.reduce(comprasPonderadas, 0)\n    const ventPond = state.ops.reduce(ventasPonderadas, 0)\n    const ppcompra = compras > 0 ? compPond / compras : 0\n    const ppventa = ventas > 0 ? ventPond / ventas : 0\n    const resTrading = Math.round(Math.min(compras, ventas) * (ppventa - ppcompra))\n    const resPos = Math.round(posicion > 0 ? posicion * (action.bid - ppcompra) : - posicion * (ppventa - action.ask))\n    return {...state, bid: action.bid, ask: action.ask, posicion: posicion,\n      ppcompra: ppcompra, ppventa: ppventa, resTrading: resTrading, resPos: resPos}\n  }\n  if (action.type === 'ELIM_OP') {\n    const newOps = state.ops.filter((op) => op.numop !== action.whichOp)\n    const compras = newOps.reduce(sumaCompras, 0)\n    const ventas = newOps.reduce(sumaVentas, 0)\n    const posicion = compras - ventas\n    const compPond = newOps.reduce(comprasPonderadas, 0)\n    const ventPond = newOps.reduce(ventasPonderadas, 0)\n    const ppcompra = compras > 0 ? compPond / compras : 0\n    const ppventa = ventas > 0 ? ventPond / ventas : 0\n    const resTrading = Math.round(Math.min(compras, ventas) * (ppventa - ppcompra))\n    const resPos = Math.round(posicion > 0 ? posicion * (action.bid - ppcompra) : - posicion * (ppventa - action.ask))\n    return {...state, ops: newOps, bid: action.bid, ask: action.ask, posicion: posicion,\n      ppcompra: ppcompra, ppventa: ppventa, resTrading: resTrading, resPos: resPos}\n  }\n  return state\n}\n\nexport default update"]},"metadata":{},"sourceType":"module"}